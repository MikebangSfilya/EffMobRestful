# Subscription Service

[![Go](https://img.shields.io/badge/Go-1.24-blue)](https://golang.org)
[![PostgreSQL](https://img.shields.io/badge/PostgreSQL-16-%234169E1)](https://www.postgresql.org)
[![Docker](https://img.shields.io/badge/Docker-‚úî-2496ED)](https://docker.com)
[![License](https://img.shields.io/badge/license-MIT-green)](LICENSE)

–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–¥–ø–∏—Å–∫–∞–º–∏ —Å REST API –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º.

## –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

- **CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏**¬†–Ω–∞–¥ –ø–æ–¥–ø–∏—Å–∫–∞–º–∏:
    - –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∏
    - –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ–¥–ø–∏—Å–∫–µ    
    - –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –ø–æ–¥–ø–∏—Å–æ–∫    
    - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∏    
    - –£–¥–∞–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∏    
- **–†–∞—Å—á–µ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏**¬†–ø–æ–¥–ø–∏—Å–æ–∫ –∑–∞ –ø–µ—Ä–∏–æ–¥ —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π
- **–í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö**¬†–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API**¬†—á–µ—Ä–µ–∑ Swagger
## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

### **Backend**
- **Go 1.24** - –æ—Å–Ω–æ–≤–Ω–æ–π —è–∑—ã–∫ 
- **Chi Router** - –≤—ã—Å–æ–∫–æ–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω—ã–π HTTP —Ä–æ—É—Ç–µ—Ä
- **Swagger** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API

### **Data Layer** 
- **PostgreSQL 16** - —Ä–µ–ª—è—Ü–∏–æ–Ω–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- **pgx/pgxpool** - –¥—Ä–∞–π–≤–µ—Ä PostgreSQL —Å –ø—É–ª–æ–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π

### **Infrastructure**
- **Docker & Docker Compose** - –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è –∏ –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è
- **Database Migrations** 
- **Environment Configuration** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

##  API Endpoints

### –ü–æ–¥–ø–∏—Å–∫–∏

- `POST /subscriptions`¬†- –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –ø–æ–¥–ø–∏—Å–∫—É
- `GET /subscriptions`¬†- –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –ø–æ–¥–ø–∏—Å–∫–∏
- `GET /subscriptions/{id}`¬†- –ü–æ–ª—É—á–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É –ø–æ ID
- `PUT /subscriptions/{id}`¬†- –û–±–Ω–æ–≤–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É
- `DELETE /subscriptions/{id}`¬†- –£–¥–∞–ª–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É
### –†–∞—Å—á–µ—Ç—ã

- `GET /subscriptions/sum`¬†- –ü–æ–¥—Å—á–µ—Ç —Å—É–º–º–∞—Ä–Ω–æ–π —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –ø–æ–¥–ø–∏—Å–æ–∫

#### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ —Å—É–º–º—ã:

- `id`¬†(–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) - —Ñ–∏–ª—å—Ç—Ä –ø–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
- `service_name`¬†(–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) - —Ñ–∏–ª—å—Ç—Ä –ø–æ —Å–µ—Ä–≤–∏—Å—É
- `from`¬†(–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ) - –Ω–∞—á–∞–ª–æ –ø–µ—Ä–∏–æ–¥–∞ (—Ñ–æ—Ä–º–∞—Ç: MM-YYYY)  
- `to`¬†(–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ) - –∫–æ–Ω–µ—Ü –ø–µ—Ä–∏–æ–¥–∞ (—Ñ–æ—Ä–º–∞—Ç: MM-YYYY)

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```text
subscription/
‚îú‚îÄ‚îÄ cmd/
‚îÇ   ‚îî‚îÄ‚îÄ main.go                 # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îú‚îÄ‚îÄ docs           
‚îÇ   ‚îú‚îÄ‚îÄ swagger.json                
‚îÇ   ‚îî‚îÄ‚îÄ swagger.yaml           
‚îú‚îÄ‚îÄ internal/
‚îÇ   ‚îú‚îÄ‚îÄ api/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ handlers/           # HTTP –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ dto/                # Data Transfer Objects  
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ server/             # HTTP —Å–µ—Ä–≤–µ—Ä
‚îÇ   ‚îú‚îÄ‚îÄ database/               # –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î
‚îÇ   ‚îî‚îÄ‚îÄ model/                  # –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö (—Å—É—â–Ω–æ—Å—Ç–∏ –ë–î)
‚îú‚îÄ‚îÄ migrations/                 # –ú–∏–≥—Ä–∞—Ü–∏–∏ –ë–î
‚îú‚îÄ‚îÄ docker-compose.yml          # Docker Compose
‚îú‚îÄ‚îÄ Dockerfile                  # Docker –æ–±—Ä–∞–∑
‚îî‚îÄ‚îÄ .env                        # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
```
##  –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
```bash
git clone https://github.com/MikebangSfilya/subscription.git
cd subscription
```

2. –ó–∞–ø—É—Å—Ç–∏ —á–µ—Ä–µ–∑ Docker
```bash
docker-compose up -d
```
3. API –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –Ω–∞ http://localhost:9091


##  Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã

–°–µ—Ä–≤–∏—Å —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ —Ç—Ä–µ—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤:
1. **postgres**¬†- –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö PostgreSQL
2. **migrate**¬†- –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π –ë–î
3. **app**¬†- –û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ –±–µ–∑ Docker

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:

```bash
go mod download
```

2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ PostgreSQL –ª–æ–∫–∞–ª—å–Ω–æ
3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:
```bash
go run cmd/main.go
```

### –ú–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

–ú–∏–≥—Ä–∞—Ü–∏–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ —á–µ—Ä–µ–∑ Docker Compose. –î–ª—è —Ä—É—á–Ω–æ–≥–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è:

```bash
docker-compose run migrate
```

##  –ú–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö

### Subscription

```go

type Subscription struct {
    ID          string      `json:"id"`
    ServiceName string      `json:"service_name"`
    Price       int         `json:"price"`
    UserId      string      `json:"user_id"`
    StartDate   CustomDate  `json:"start_date"`
    EndDate     *CustomDate `json:"end_date,omitempty"`
}
```

### CustomDate

–ö–∞—Å—Ç–æ–º–Ω—ã–π —Ç–∏–ø –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–∞—Ç–∞–º–∏ –≤ —Ñ–æ—Ä–º–∞—Ç–µ "MM-YYYY"

##  –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∏

```bash

curl -X POST http://localhost:9091/subscriptions \
  -H "Content-Type: application/json" \
  -d '{
    "service_name": "Netflix",
    "price": 599,
    "user_id": "a37a0327-99af-4e62-8b33-55dc3863cdc6",
    "start_date": "01-2024"
  }'
```

### –†–∞—Å—á–µ—Ç —Å—É–º–º—ã –ø–æ–¥–ø–∏—Å–æ–∫

```bash
curl "http://localhost:9091/subscriptions/sum?from=01-2024&to=12-2024"
```

##  –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ª–æ–≥–∏—Ä—É–µ—Ç –∫–ª—é—á–µ–≤—ã–µ —Å–æ–±—ã—Ç–∏—è:

- –£—Å–ø–µ—à–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
- –û—à–∏–±–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- –û—à–∏–±–∫–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- HTTP –∑–∞–ø—Ä–æ—Å—ã

–õ–æ–≥–∏ –≤—ã–≤–æ–¥—è—Ç—Å—è –≤ stdout –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞.

##  –ü–ª–∞–Ω—ã –ø–æ —Ä–∞–∑–≤–∏—Ç–∏—é

- –î–æ–±–∞–≤–∏—Ç—å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é
- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–∞–≥–∏–Ω–∞—Ü–∏—é –¥–ª—è —Å–ø–∏—Å–∫–∞ –ø–æ–¥–ø–∏—Å–æ–∫
- –î–æ–±–∞–≤–∏—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± –∏—Å—Ç–µ–∫–∞—é—â–∏—Ö –ø–æ–¥–ø–∏—Å–∫–∞—Ö
- –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- –°–æ–∑–¥–∞—Ç—å –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–µ SDK
## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è
–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ–¥ –ª–∏—Ü–µ–Ω–∑–∏–µ–π MIT. –ü–æ–¥—Ä–æ–±–Ω–µ–µ —Å–º. –≤ —Ñ–∞–π–ª–µ [LICENSE](LICENSE).
Copyright ¬© 2025 [MikebangSfilya](https://github.com/MikebangSfilya)